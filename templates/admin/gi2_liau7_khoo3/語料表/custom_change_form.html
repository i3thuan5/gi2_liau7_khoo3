{% extends "admin/change_form.html" %}

{% block field_sets %}
{% for fieldset in adminform %}
	{% include "admin/includes/fieldset.html" %}
	{% if fieldset.name == '音檔' and original.音檔.原始檔 != None %}
		<p>原始檔網址: {{original.音檔.原始檔.url}}</p>
		<div class='row'>
    		<audio controls id='audio' ontimeupdate="restrictAudio(this)">
        	<source src="{{original.音檔.原始檔.url}}">
        	Your browser does not support the audio element.
    		</audio>
    		<span id='position'></span>
		</div>
  	{% endif %}
{% endfor %}
{% endblock %}

{% block admin_change_form_document_ready %}
	<script type="text/javascript">
	var vid = document.getElementById('audio');
	vid.currentTime = {{original.聲音開始時間}};
	function restrictAudio(event) {
		if(event.currentTime >= {{original.聲音結束時間}}){
			console.log(event.currentTime)
			event.pause();
			event.currentTime = {{original.聲音開始時間}};
		}
	}
	</script>
{% endblock %}